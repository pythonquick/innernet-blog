
<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/font-awesome/css/font-awesome.min.css">





  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />


<meta name="author" content="Guenther" />
<meta name="description" content="AJAX stands for asynchronous JavaScript and and XML. This allows a single page in the browser to make requests to the server without reloading the entire page. Browsers implement the XMLHttpRequest object that can make these server requests in the background. This object and AJAX calls in general is often ..." />
<meta name="keywords" content="JavaScript, jQuery">
<meta property="og:site_name" content="innernet"/>
<meta property="og:title" content="AJAX calls"/>
<meta property="og:description" content="AJAX stands for asynchronous JavaScript and and XML. This allows a single page in the browser to make requests to the server without reloading the entire page. Browsers implement the XMLHttpRequest object that can make these server requests in the background. This object and AJAX calls in general is often ..."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="http://localhost:8000/ajax-calls.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2016-07-27 00:00:00-04:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="http://localhost:8000/author/guenther.html">
<meta property="article:section" content="Tutorials"/>
<meta property="article:tag" content="JavaScript"/>
<meta property="article:tag" content="jQuery"/>
<meta property="og:image" content="http://s.gravatar.com/avatar/fcfe36f97f3eb56b69ecce65d0c895dc?s=80">

  <title>innernet &ndash; AJAX calls</title>
</head>
<body>
  <aside>
    <div>
      <a href="http://localhost:8000">
        <img src="http://s.gravatar.com/avatar/fcfe36f97f3eb56b69ecce65d0c895dc?s=80" alt="" title="">
      </a>
      <h1><a href="http://localhost:8000"></a></h1>


      <nav>
        <ul class="list">
          <li><a href="http://localhost:8000/pages/about.html#about">About</a></li>

        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-You can add links in your config file" href="#" target="_blank"><i class="fa fa-You can add links in your config file"></i></a></li>
        <li><a class="sc-Another social link" href="#" target="_blank"><i class="fa fa-Another social link"></i></a></li>
      </ul>
    </div>
  </aside>
  <main>
    <nav>
      <a href="http://localhost:8000">    Home
</a>

      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>
      <a href="/archives.html">Archives</a>


    </nav>

<article class="single">
  <header>
    <h1 id="ajax-calls">AJAX calls</h1>
    <p>
          Posted on Wed 27 July 2016 in <a href="http://localhost:8000/category/tutorials.html">Tutorials</a>


    </p>
  </header>
  <div>
    <p>AJAX stands for asynchronous JavaScript and and XML. This allows a single page in the browser to make requests to the server without reloading the entire page.
Browsers implement the XMLHttpRequest object that can make these server requests in the background. This object and AJAX calls in general is often referred to as XHR.
In this lesson we'll work with the jQuery ajax method, which uses the browser's XMLHttpRequest object. The XMLHttpRequest object can be used directly, but jQuery adds a few convenient options, and also takes care of any differences between the XMLHttpRequest objects on different types of browsers.</p>
<h1>Simple call</h1>
<p>jQuery provides the method <code>$.ajax</code> to initiate an AJAX call. The first parameter is the URL.</p>
<p>Here is a simple call using $.ajax and a URL. No other parameters and options used:</p>
<div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="s2">&quot;https://innernet.io/media/boston.html&quot;</span><span class="p">);</span>
</pre></div>


<h1>Specify a callback - the old way</h1>
<p>We can specify a callback function - a function that will be called once we eventually get some results back from the AJAX call. For this we'll use the second parameter of the $.ajax method which is an object with options.</p>
<p>Three of these options are callback functions:</p>
<ul>
<li>success: the function that will be called once the AJAX is successful. The success function will get passed a parameter with the response that came back from the server request</li>
<li>error: the function that will be called if the AJAX call was unsuccessful, for example, if the URL was invalid or the server returned an error response, like HTTP response code 500. This method will get three parameters passed:<ul>
<li>the jqXHR object, which is the object representing the ajax call. This is the object returned by the call to $.ajax</li>
<li>textStatus: a string representing the status. This will typically be the string "error"</li>
<li>errorThrown: a string that represents the type of error. For example, "File not found"</li>
</ul>
</li>
<li>complete: the function that will be called once the AJAX call is complete, whether it completed with success or with error</li>
</ul>
<p>NOTE: these callback functions are deprecated, but they still work. It is recommended to use the new "promise interface" and the done, fail and always methods. See one of the next sections: "Promise Interface"</p>
<p>Here is a sample of an AJAX call that uses the three callbacks:</p>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">handleSuccess</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span> <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;handleSuccess&#39;</span><span class="p">);</span> <span class="p">}</span>
<span class="kd">function</span> <span class="nx">handleError</span><span class="p">(</span><span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">textStatus</span><span class="p">,</span> <span class="nx">errorThrown</span><span class="p">)</span> <span class="p">{</span> <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;handleError &#39;</span> <span class="o">+</span> <span class="nx">textStatus</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">errorThrown</span><span class="p">);</span> <span class="p">}</span>
<span class="kd">function</span> <span class="nx">handleComplete</span><span class="p">()</span> <span class="p">{</span>  <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;handleComplete&#39;</span><span class="p">);</span> <span class="p">}</span>

<span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;https://innernet.io/media/boston.html&#39;</span>
<span class="kd">var</span> <span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">success</span><span class="o">:</span> <span class="nx">handleSuccess</span><span class="p">,</span>
    <span class="nx">error</span><span class="o">:</span> <span class="nx">handleError</span><span class="p">,</span>
    <span class="nx">complete</span><span class="o">:</span> <span class="nx">handleComplete</span>
<span class="p">};</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
</pre></div>


<h1>More AJAX call options</h1>
<p>The previous section used the second parameter of $.ajax: the settings object, where it used the success, error and complete options.
There are many more options that can be set. For a complete list, see the $.ajax method documentation at <a href="http://api.jquery.com/jQuery.ajax/">http://api.jquery.com/jQuery.ajax/</a></p>
<p>The sections below deal with a few common options: method, data, dataType and headers.</p>
<h2>The method option</h2>
<p>By default, the HTTP method GET will be used. To use a different HTTP method, use the <code>method</code> option. For example, to make a POST request to the same URL, do this:</p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;https://innernet.io/media/boston.html&#39;</span>
<span class="kd">var</span> <span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">method</span><span class="o">:</span> <span class="s2">&quot;POST&quot;</span>
<span class="p">};</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
</pre></div>


<p>Note: doing a POST to the <a href="https://innernet.io/media/boston.html">https://innernet.io/media/boston.html</a> URL will not be supported. This is just to illustrate how to use a different HTTP method.</p>
<h2>The data option</h2>
<p>To add a collection of name-value parameters (also referred to as query parameters) to the URL, the parameters and values can be specified in an object for the "data" option. Here's an example that adds four query parameters to the URL:</p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;https://innernet.io/media/boston.html&#39;</span>
<span class="kd">var</span> <span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">FTYPE</span><span class="o">:</span> <span class="s1">&#39;R&#39;</span><span class="p">,</span>
        <span class="nx">INKEY</span><span class="o">:</span> <span class="s1">&#39;abef692a32&#39;</span><span class="p">,</span>
        <span class="nx">INIT</span><span class="o">:</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span>
        <span class="nx">KPRODUCTID</span><span class="o">:</span> <span class="mi">234</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
</pre></div>


<h2>The dataType option</h2>
<p>When specifying a success callback, the first parameter to the callback function will be the result of the server response. jQuery will try to infer the type of data. For example, if the URL ends with .json or if the HTTP response header specifies that the type of data is in JSON format, jQuery will attempt to parse the server response as JSON and provide a JSON object as a parameter. In the case of the URL to <a href="https://innernet.io/media/boston.html">https://innernet.io/media/boston.html</a>, the success method will get back a big text string.
To tell jQuery that the response content is JSON, set the dataType option to "JSON":</p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;https://innernet.io/media/boston.html&#39;</span>
<span class="kd">var</span> <span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">dataType</span><span class="o">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
        <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
        <span class="p">}</span>
<span class="p">};</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
</pre></div>


<p>The success function's data parameter will now be an object that represents the JSON output - not a string. That means, we can now access the attributes of the object - in this case the name attribute.</p>
<h2>The headers option</h2>
<p>To send certain HTTP request headers to the server, use the headers option. The value of this option is an object. Each property/key of the object is the name of the HTTP request header and the value of of the property is the value of the HTTP request header.</p>
<p>Here's an example of how to call the URL with the HTTP request header "Cache-Control" set to "max-age=1000":</p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;https://innernet.io/media/boston.html&#39;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">&#39;Cache-Control&#39;</span><span class="o">:</span> <span class="s1">&#39;max-age=1000&#39;</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
</pre></div>


<h1>Promise interface</h1>
<p>A promise object represents an eventual outcome. The $.ajax method returns a jqXML object. This jqXML object implement's jQuery's promise interface. That means, once we have a reference to the jqXML object, we can attach functions that will be run eventually as the AJAX call completes.</p>
<p>The three common function hooks that can be attached are:</p>
<ul>
<li>done: a function that will run when the AJAX call completes successfully</li>
<li>fail: a function that will run when the AJAX call completes with an error</li>
<li>always: a function that will run when the AJAX call completes, regardless of success or error</li>
</ul>
<p>These three types of "hooks" work like the success, error and complete functions of the $.ajax method's settings parameter (the second parameter, after the URL).</p>
<p>There is a difference however. By using the done, fail and always hooks one gets more flexibility. For example:</p>
<ul>
<li>these hooks can be attached at a later stage, as long as there's a reference to the jqXML object. With the success/error/complete functions however, they need to be attached at the time when the $.ajax call is made.</li>
<li>one can attach more than one type of these hooks. For example, one can add 2 or more "done" functions. They will all get triggered (run) when the AJAX call completes successfully</li>
</ul>
<p>Note: the done, fail and always methods are methods of the jqXML object and each of them return the jqXML object itself. That means, it's possible to "chain" the method calls.</p>
<p>Here's an example that reuses the previously defined functions: handleSuccess, handleError and handleComplete:</p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">jqXHR</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="s1">&#39;https://innernet.io/media/boston.html&#39;</span><span class="p">);</span>

<span class="nx">jqXHR</span>
    <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="nx">handleSuccess</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">handleError</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">always</span><span class="p">(</span><span class="nx">handleComplete</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;we are done&#39;</span><span class="p">);</span>
    <span class="p">});</span>
</pre></div>


<h1>The post and get helper</h1>
<p>There are a couple of helper methods that in turn use the $.ajax method but provide a simple call interface using several default options.</p>
<p>One of these is the $.post method. It takes the URL as the first parameter, just as with $.ajax. It uses the HTTP method "POST" and takes a success callback function as a subsequent parameter.</p>
<p>The following makes a POST request to the specified URL and logs the resulting response text to the console:</p>
<div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;https://innernet.io/media/boston.html&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> 
<span class="p">});</span>
</pre></div>


<p>The $.get method works similar but it uses the HTTP GET method.</p>
<p>Note, the $.ajax method also uses HTTP GET method by default, but the $.get method is handy because it's easy to attach a success/done handler function by simply providing it as a second parameter to the call of $.get</p>
<h1>The getJSON helper</h1>
<p>When the response from the server is a text string but it represents JSON data, one needs to first parse the text to a JavaScript object before that object can be queried. Here's an example that first gets the text data from the server, parses it and then alerts the weather condition:</p>
<div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;https://innernet.io/media/boston.html&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">jsonObject</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">parseJSON</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">jsonObject</span><span class="p">.</span><span class="nx">weather</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">description</span><span class="p">);</span> 
<span class="p">});</span>
</pre></div>


<p>If we know already that the output will be in JSON format, the dataType option can be used to specify that the expected content type is JSON. In that case, the success / done function will get a parameter of type Object, instead of type String:</p>
<div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="s1">&#39;https://innernet.io/media/boston.html&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">dataType</span><span class="o">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
    <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">weather</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">description</span><span class="p">);</span> 
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>


<p>The $.getJSON method simplifies this. It sets the dataType to 'json' and takes the success function as the second parameter:</p>
<div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="s1">&#39;https://innernet.io/media/boston.html&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">weather</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">description</span><span class="p">);</span> 
<span class="p">});</span>
</pre></div>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="http://localhost:8000/tag/javascript.html">JavaScript</a>
      <a href="http://localhost:8000/tag/jquery.html">jQuery</a>
    </p>
  </div>



</article>

    <footer>
<p>&copy; Guenther </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>





<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " innernet ",
  "url" : "http://localhost:8000",
  "image": "http://s.gravatar.com/avatar/fcfe36f97f3eb56b69ecce65d0c895dc?s=80",
  "description": ""
}
</script>
</body>
</html>